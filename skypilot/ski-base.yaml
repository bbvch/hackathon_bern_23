resources:
  # Optional; if left out, automatically pick the cheapest cloud.
  cloud: azure
  region: eastus
  # 1x NVIDIA V100 GPU
  #accelerators: V100:1


# Working directory (optional) containing the project codebase.
# Its contents are synced to ~/sky_workdir/ on the cluster.
workdir: .

# Typical use: pip install -r requirements.txt
# Invoked under the workdir (i.e., can use its files).
setup: |
  echo "Running setup."
  sudo apt install tree
  source /home/azureuser/sky_workdir/utilities/setup.sh
  pip3 install --upgrade pip
  pip3 install --no-cache-dir -r /home/azureuser/sky_workdir/requirements.txt
  sudo apt-get update && apt-get install ffmpeg libsm6 libxext6  -y
  pip3 install --no-cache-dir -r /home/azureuser/sky_workdir/requirements_torch.txt

# Typical use: make use of resources, such as running training.
# Invoked under the workdir (i.e., can use its files).
run: |
  source utilities/setup.sh
  python3 main.py